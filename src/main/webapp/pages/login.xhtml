<!DOCTYPE html>
<html class="h-full" xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="jakarta.faces.html"
      xmlns:f="jakarta.faces.core"
      xmlns:p="http://primefaces.org/ui">

<h:head>
    <title>HMS - Login</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <!-- Changed to Tailwind Play CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            important: true
        }
    </script>
    <!-- Add PrimeIcons CSS -->
    <h:outputStylesheet library="primefaces" name="primeicons/primeicons.css"/>
</h:head>

<h:body class="h-full bg-gradient-to-br from-indigo-500 via-purple-500 to-purple-800">
    <div class="flex min-h-full flex-col justify-center px-6 py-12 lg:px-8">
        <div class="sm:mx-auto sm:w-full sm:max-w-md">
            <h:form id="loginForm">
                <div class="bg-white rounded-xl shadow-2xl overflow-hidden">
                    <!-- Panel Header -->
                    <div class="bg-gradient-to-r from-indigo-500 to-purple-600 px-6 py-8 text-center">
                        <h2 class="text-2xl font-bold text-white">Hospital Management System</h2>
                    </div>

                    <!-- Panel Content -->
                    <div class="px-8 py-6">
                        <!-- Messages for login feedback -->
                        <p:messages id="messages" showDetail="false" closable="true"
                                    styleClass="mb-4" severityClass=""
                                    infoClass="bg-blue-100 border-l-4 border-blue-500 text-blue-700 p-4"
                                    errorClass="bg-red-100 border-l-4 border-red-500 text-red-700 p-4"
                                    warnClass="bg-yellow-100 border-l-4 border-yellow-500 text-yellow-700 p-4"/>

                        <!-- Email Input -->
                        <div class="mb-6">
                            <label for="email" class="block text-sm font-medium text-gray-700 mb-2">Email Address</label>
                            <p:inputText id="email"
                                         value="#{userBean.email}"
                                         required="true"
                                         requiredMessage="Email is required"
                                         validatorMessage="Please enter a valid email address"
                                         placeholder="Enter your email"
                                         styleClass="block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-3 border">
                                <f:validateRegex pattern="^[A-Za-z0-9+_.-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}$" />
                                <p:ajax event="blur" update="emailMsg" />
                            </p:inputText>
                            <p:message id="emailMsg" for="email" display="text"
                                       styleClass="text-red-500 text-xs mt-1"/>
                        </div>

                        <!-- Password Input -->
                        <div class="mb-6">
                            <label for="password" class="block text-sm font-medium text-gray-700 mb-2">Password</label>
                            <p:password id="password"
                                        value="#{userBean.password}"
                                        required="true"
                                        requiredMessage="Password is required"
                                        feedback="false"
                                        placeholder="Enter your password"
                                        styleClass="block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-3 border">
                                <p:ajax event="blur" update="passwordMsg" />
                            </p:password>
                            <p:message id="passwordMsg" for="password" display="text"
                                       styleClass="text-red-500 text-xs mt-1"/>
                        </div>

                        <!-- Login Button -->
                        <div class="mb-4">
                            <p:commandButton value="Sign In"
                                             action="#{userBean.login()}"
                                             update="messages"
                                             styleClass="w-full flex justify-center py-3 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-gradient-to-r from-indigo-500 to-purple-600 hover:from-indigo-600 hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-transform hover:-translate-y-0.5"
                                             icon="pi pi-sign-in"
                                             process="@form" />
                        </div>

                        <!-- Forgot Password Link -->
                        <div class="text-center">
                            <a href="#" onclick="alert('Password reset functionality to be implemented');"
                               class="text-sm font-medium text-indigo-600 hover:text-indigo-500">
                                Forgot your password?
                            </a>
                        </div>
                    </div>
                </div>
            </h:form>
        </div>
    </div>

    <!-- Loading dialog for login process -->
    <p:ajaxStatus onstart="PF('statusDialog').show()"
                  oncomplete="PF('statusDialog').hide()" />

    <p:dialog widgetVar="statusDialog" modal="true" draggable="false"
              closable="false" resizable="false" showHeader="false"
              styleClass="border-none bg-transparent shadow-none">
        <div class="flex items-center justify-center p-6 bg-white rounded-lg shadow-xl">
            <div class="w-8 h-8 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin"></div>
            <span class="ml-3 text-gray-700">Signing in...</span>
        </div>
    </p:dialog>
</h:body>
</html>